<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Web on Night Space</title><link>https://blog.nightspace.dynv6.net/tags/web/</link><description>Recent content in Web on Night Space</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 03 Dec 2021 12:55:30 +0800</lastBuildDate><atom:link href="https://blog.nightspace.dynv6.net/tags/web/index.xml" rel="self" type="application/rss+xml"/><item><title>如何利用Hugo,Fuse,Utterances,Github Pages,Github Actions搭建一个支持Marldown语法，搜索，评论，自动化部署，在线编辑的个人博客</title><link>https://blog.nightspace.dynv6.net/post/how-to-set-up-personal-blog/</link><pubDate>Fri, 03 Dec 2021 12:55:30 +0800</pubDate><guid>https://blog.nightspace.dynv6.net/post/how-to-set-up-personal-blog/</guid><description>&lt;p>&lt;del>哪个男孩不渴望一个拥有一个个人博客呢&lt;/del>&lt;/p>
&lt;p>本文将会一步一步地介绍个人博客的搭建的全过程（也是&lt;a class="link" href="https://NightSpaceC.github.io/blog/" target="_blank" rel="noopener"
>我的个人博客&lt;/a>的搭建过程）&lt;/p>
&lt;p>注：如果有不明白的地方，可以看&lt;a class="link" href="https://github.com/NightSpaceC/blog" target="_blank" rel="noopener"
>我的个人博客的Github仓库&lt;/a>&lt;/p>
&lt;h1 id="hugo">Hugo&lt;/h1>
&lt;p>Hugo是一个静态网站生成器。当然，它也可以生成我们要搭建的个人博客。&lt;/p>
&lt;h3 id="安装">安装&lt;/h3>
&lt;p>这一步十分简单，只需要前往&lt;a class="link" href="https://github.com/gohugoio/hugo/releases/" target="_blank" rel="noopener"
>Hugo在Github上的Release页面&lt;/a>，下载对应的版本并解压到合适的位置就行了。&lt;/p>
&lt;p>你也可以下载Deb包，再通过&lt;code>dpkg -i &amp;lt;.deb文件名&amp;gt;&lt;/code>安装&lt;/p>
&lt;p>如非必需，建议下载extended版本，因为在之后可能会用到&lt;/p>
&lt;h3 id="使用">使用&lt;/h3>
&lt;p>首先，选定一个目录来存放你的博客，你需要作如下事情：&lt;/p>
&lt;ul>
&lt;li>在该目录下创建&lt;code>config.toml&lt;/code>文件，用于存储配置信息（为TOML格式）&lt;/li>
&lt;li>在该目录下创建&lt;code>themes&lt;/code>文件夹，用于存储主题&lt;/li>
&lt;li>在该目录下创建&lt;code>content&lt;/code>文件夹，用于存储文章&lt;/li>
&lt;/ul>
&lt;p>你需要找一个Hugo主题，并把它放在&lt;code>themes&lt;/code>文件夹下（我使用了&lt;a class="link" href="https://github.com/olOwOlo/hugo-theme-even" target="_blank" rel="noopener"
>hugo-theme-even&lt;/a>）&lt;/p>
&lt;p>依照你所使用的主题的文档或示例，编写&lt;code>config.toml&lt;/code>和在&lt;code>content&lt;/code>文件夹下添加文章（有时可能还要编辑&lt;code>themes/主题名/config.toml&lt;/code>，如&lt;a class="link" href="https://github.com/syui/hugo-theme-air" target="_blank" rel="noopener"
>hugo-theme-air&lt;/a>）&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/NightSpaceC/blog/blob/master/config.toml" target="_blank" rel="noopener"
>我的config.toml&lt;/a>&lt;/p>
&lt;p>一切就绪后，你可以在目录下运行&lt;code>hugo server&lt;/code>来让Hugo构建网站，并可以通过&lt;a class="link" href="http://localhost:1313/" target="_blank" rel="noopener"
>http://localhost:1313&lt;/a>访问&lt;/p>
&lt;p>注1：要构建设置了&lt;code>draft: true&lt;/code>的草稿文章，请使用&lt;code>hugo server --draft&lt;/code>&lt;/p>
&lt;p>注2：命令中的&lt;code>hugo&lt;/code>视可执行文件位置而定，除非你使用Deb包，下文也依旧如此&lt;/p>
&lt;h3 id="发布">发布&lt;/h3>
&lt;p>测试完成后，你可以使用&lt;code>hugo&lt;/code>来发布。此时构建结果会输出到&lt;code>public&lt;/code>文件夹&lt;/p>
&lt;p>然后，你可以利用Web服务器和浏览器，来访问它们。&lt;/p>
&lt;p>注：如果你真的要就这样把它发布出去，你必须在&lt;code>config.toml&lt;/code>中加入&lt;code>baseURL&lt;/code>参数，值为今后访问它时使用的URL，如&lt;code>https://NightSpaceC.github.io/blog/&lt;/code>&lt;/p>
&lt;h1 id="部署在github-pages上">部署在Github Pages上&lt;/h1>
&lt;p>在此之前，你需要&lt;/p>
&lt;ul>
&lt;li>一个Github帐号&lt;/li>
&lt;li>安装Git&lt;/li>
&lt;li>知晓Git与Github的基本使用方法&lt;/li>
&lt;/ul>
&lt;p>以上不属于本文的主要内容，不再赘述&lt;/p>
&lt;h3 id="创建一个用于存放个人博客的仓库">创建一个用于存放个人博客的仓库&lt;/h3>
&lt;p>建议仓库名为&lt;code>&amp;lt;用户名&amp;gt;.github.io&lt;/code>&lt;/p>
&lt;p>其余略&lt;/p>
&lt;h3 id="将个人博客推送至上一步创建的仓库">将个人博客推送至上一步创建的仓库&lt;/h3>
&lt;ol>
&lt;li>进行前文所述的发布操作&lt;/li>
&lt;li>进入&lt;code>public/&lt;/code>目录&lt;/li>
&lt;li>执行&lt;code>git init&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git remote add origin &amp;lt;创建的仓库的地址，如https://github.com/NightSpaceC/blog.git&amp;gt;&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git add -A&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git commit -m &amp;quot;&amp;lt;提交描述&amp;gt;&amp;quot;&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git push&lt;/code>（此步骤可能要求你填写帐号和私人访问密钥）&lt;/li>
&lt;/ol>
&lt;p>其中3,4仅第一次推送时需执行&lt;/p>
&lt;p>每一次博客内容的改变，都需要执行以上操作&lt;/p>
&lt;h3 id="配置github-pages">配置Github Pages&lt;/h3>
&lt;p>前往&lt;code>https://github.com/&amp;lt;Github用户名&amp;gt;/&amp;lt;创建的仓库名&amp;gt;/settings/pages&lt;/code>&lt;/p>
&lt;p>设置Source部分的分支（此时应该只有一个，选择即可）和目录，点击Save&lt;/p>
&lt;p>此时，你的博客访问地址将会在上方显示（用这个来配置之前说的&lt;code>baseURL&lt;/code>）&lt;/p>
&lt;p>至此，你的个人博客已基本完成。如果你满足于此，就可以关闭这个页面了，否则，请继续往下看&lt;/p>
&lt;h1 id="使用fuse添加搜索功能">使用Fuse添加搜索功能&lt;/h1>
&lt;p>你可以使用Fuse在前端中实现搜索&lt;/p>
&lt;p>但是，直接使用Fuse是非常繁琐的。所以，我找到了一个支持Fuse的Hugo主题：&lt;a class="link" href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener"
>hugo-search-fuse-js&lt;/a>&lt;/p>
&lt;p>注：严格来说，它并不是一个独立的主题，而是可以将Fuse功能加入到已有的主题中&lt;/p>
&lt;p>使用步骤：&lt;/p>
&lt;ol>
&lt;li>将&lt;a class="link" href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener"
>hugo-search-fuse-js&lt;/a>放在themes目录下（就像之前加入自己选择的主题一样）&lt;/li>
&lt;li>将&lt;code>config.toml&lt;/code>中的&lt;code>theme = &amp;quot;&amp;lt;你的主题名&amp;gt;&amp;quot;&lt;/code>改为&lt;code>theme = [&amp;quot;hugo-search-fuse-js&amp;quot;, &amp;quot;&amp;lt;你的主题名&amp;gt;&amp;quot;]&lt;/code>&lt;/li>
&lt;li>创建&lt;code>content/search.md&lt;/code>文件作为搜索页面，内容之后再说&lt;/li>
&lt;li>依照&lt;a class="link" href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener"
>hugo-search-fuse-js&lt;/a>项目的说明对主题或&lt;a class="link" href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener"
>hugo-search-fuse-js&lt;/a>进行相应的更改（如，我需要在&lt;code>themes/hugo-theme-even/layouts/_default/baseof.html&lt;/code>中加入&lt;code>main&lt;/code>和&lt;code>footer&lt;/code>块）&lt;/li>
&lt;/ol>
&lt;p>&lt;a class="link" href="https://github.com/NightSpaceC/blog/blob/master/content/search.md" target="_blank" rel="noopener"
>我的content/search.md&lt;/a>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-md" data-lang="md">---
title: &amp;#34;🔍&amp;#34; &lt;span class="ni">#设置标题&lt;/span>
layout: &amp;#34;search&amp;#34; &lt;span class="ni">#此行为必须&lt;/span>
outputs: [&amp;#34;html&amp;#34;, &amp;#34;json&amp;#34;] &lt;span class="ni">#此行为必须&lt;/span>
menu: &amp;#34;main&amp;#34; &lt;span class="ni">#添加到主菜单&lt;/span>
weight: 60 &lt;span class="ni">#设置权重&lt;/span>，决定了在主菜单中显示的顺序（权重越低越靠前）
---
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://github.com/NightSpaceC/blog/blob/master/themes/hugo-theme-even/layouts/_default/baseof.html" target="_blank" rel="noopener"
>我的themes/hugo-theme-even/layouts/_default/baseof.html&lt;/a>：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">{{ if ne .Site.Params.version &amp;#34;4.x&amp;#34; -}}
{{ errorf &amp;#34;\n\nThere are two possible situations that led to this error:\n 1. You haven&amp;#39;t copied the config.toml yet. See https://github.com/olOwOlo/hugo-theme-even#installation \n 2. You have an incompatible update. See https://github.com/olOwOlo/hugo-theme-even/blob/master/CHANGELOG.md#400-2018-11-06 \n\n有两种可能的情况会导致这个错误发生:\n 1. 你还没有复制 config.toml 参考 https://github.com/olOwOlo/hugo-theme-even/blob/master/README-zh.md#installation \n 2. 你进行了一次不兼容的更新 参考 https://github.com/olOwOlo/hugo-theme-even/blob/master/CHANGELOG.md#400-2018-11-06 \n&amp;#34; -}}
{{ end -}}
&lt;span class="cp">&amp;lt;!DOCTYPE html&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span> &lt;span class="na">lang&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ .Site.Language }}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">charset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">meta&lt;/span> &lt;span class="na">http-equiv&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;X-UA-Compatible&amp;#34;&lt;/span> &lt;span class="na">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;IE=edge,chrome=1&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{- block &amp;#34;title&amp;#34; . -}}
{{ if .IsPage }}{{ .Title }} - {{ .Site.Title }}{{ else }}{{ .Site.Title }}{{ end }}
{{- end -}}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ partial &amp;#34;head.html&amp;#34; . }}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ partial &amp;#34;slideout.html&amp;#34; . }}
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;container&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;mobile-panel&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ if not .Params.hideHeaderAndFooter -}}
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">header&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;header&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;header&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ partial &amp;#34;header.html&amp;#34; . }}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">header&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{- end }}
{{ block &amp;#34;main&amp;#34; . }} &lt;span class="c">&amp;lt;!--此行由我添加--&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">main&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;content-wrapper&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;content&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;content&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ block &amp;#34;content&amp;#34; . }}{{ end }}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ partial &amp;#34;comments.html&amp;#34; . }}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">main&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ end }} &lt;span class="c">&amp;lt;!--此行由我添加--&amp;gt;&lt;/span>
{{ if not .Params.hideHeaderAndFooter -}}
{{ block &amp;#34;footer&amp;#34; . }} &lt;span class="c">&amp;lt;!--此行由我添加--&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">footer&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;footer&amp;#34;&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;footer&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ partial &amp;#34;footer.html&amp;#34; . }}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">footer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ end }} &lt;span class="c">&amp;lt;!--此行由我添加--&amp;gt;&lt;/span>
{{- end }}
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;back-to-top&amp;#34;&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;back-to-top&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">i&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;iconfont icon-up&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">i&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
{{ partial &amp;#34;scripts.html&amp;#34; . }}
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>至此，你可以通过访问&lt;code>&amp;lt;你的baseURL&amp;gt;/search/&lt;/code>来进行搜索&lt;/p>
&lt;h1 id="使用utterances添加评论功能">使用Utterances添加评论功能&lt;/h1>
&lt;p>Utterances的添加方法比较多，需视情况而定&lt;/p>
&lt;p>大部分情况下，你需要进行如下操作：&lt;/p>
&lt;ol>
&lt;li>创建一个仓库用于存放评论（也可以使用已有仓库，如之前创建的博客仓库）&lt;/li>
&lt;li>安装&lt;a class="link" href="https://github.com/apps/utterances" target="_blank" rel="noopener"
>Github App Utterances&lt;/a>，Repository access中选择Only select repositories，选择用于存放评论的仓库&lt;/li>
&lt;li>在&lt;a class="link" href="https://utteranc.es" target="_blank" rel="noopener"
>Utterances&lt;/a>生成JavaScript代码，在页面模板的合适位置添加&lt;/li>
&lt;/ol>
&lt;p>当然，如果你像我一样幸运，使用的主题对Utterances提供了支持，那么仅需根据文档或示例修改&lt;code>config.toml&lt;/code>即可&lt;/p>
&lt;h1 id="利用github-actions进行自动化部署与在线编辑">利用Github Actions进行自动化部署与在线编辑&lt;/h1>
&lt;h3 id="这有什么用">这有什么用？&lt;/h3>
&lt;p>这当然是有用的。例如：&lt;/p>
&lt;ol>
&lt;li>你不再需要用自己的电脑Build再Push&lt;/li>
&lt;li>使得编辑文章变得简单，甚至可以直接在Github的提供的网页接口上编辑&lt;/li>
&lt;/ol>
&lt;h3 id="步骤">步骤&lt;/h3>
&lt;ol>
&lt;li>创建&lt;code>.github/workflows/deploy-gh-pags.yml&lt;/code>，内容如下：&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub Pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="l">master&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">pull_request&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">concurrency&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.workflow }}-${{ github.ref }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;latest&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">if&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ github.ref == &amp;#39;refs/heads/master&amp;#39; }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">personal_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w">
&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gh-pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol start="3">
&lt;li>删除所有Hugo自动生成的文件（包括public文件夹）&lt;/li>
&lt;li>执行&lt;code>git init&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git remote add origin &amp;lt;仓库地址&amp;gt;&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git add -A&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git commit -m &amp;quot;&amp;lt;提交描述&amp;gt;&amp;quot;&lt;/code>&lt;/li>
&lt;li>执行&lt;code>git push&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>注：必须确保刚刚添加的文件处于&lt;code>master&lt;/code>分支，否则请自行修改&lt;code>.github/workflows/deploy-gh-pags.yml&lt;/code>&lt;/p>
&lt;p>执行完上述操作，Github会自动自行第2步中编写的Github Actions配置文件，构建你的个人博客，并将&lt;code>public&lt;/code>文件夹下的内容放在&lt;code>gh-pages&lt;/code>分支，设置Github Pages地址&lt;/p>
&lt;h1 id="大功告成">大功告成&lt;/h1>
&lt;p>现在，你有了一个如标题所说的个人博客。每当仓库里的内容改变，Github Actions会自动帮你构建并部署。还可以随心所欲地搜索、评论。&lt;/p>
&lt;h1 id="update">Update&lt;/h1>
&lt;p>2021-12-5 12:30:00 +08:00: 由于认为Gitalk存在安全隐患，改用Utterances&lt;/p></description></item></channel></rss>